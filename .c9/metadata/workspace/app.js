{"changed":true,"filter":false,"title":"app.js","tooltip":"/app.js","value":"var express = require(\"express\"),\n    app = express(),\n    mongoose = require('mongoose'),\n    db = mongoose.connection,\n    request = require(\"request\"),\n    multer = require('multer'),\n    bodyParser = require('body-parser'),\n    PDFDocument = require('pdfkit');\n    \n//Use for upload file\napp.use(multer({\n    dest: './uploads/'\n}));\n//use for parsing body data\napp.use(bodyParser.urlencoded({\n    extended: true\n}));\n//add support for text/plain\napp.use(function(req, res, next) {\n    if (req.is('text/*')) {\n        req.text = '';\n        req.setEncoding('utf8');\n        req.on('data', function(chunk) {\n            req.text += chunk;\n        });\n        req.on('end', next);\n    }\n    else {\n        next();\n    }\n});\nprocess.env.MONGOCON = \"mongodb://cloud9:ZSTqSa04E7Lp3ao@kahana.mongohq.com:10005/app26722556\";\napp.listen(process.env.PORT, process.env.IP);\n\n\n\n//Start Mongoose\nmongoose.connect(process.env.MONGOCON);\n//DB open function\ndb.on('error', console.error.bind(console, 'mongodb connection error:'));\ndb.once('open', function callback() {\n    //use to get the hl7 from mirth\n    app.post('/posthl7', function(req, res) {\n        console.log(req.text);\n        res.send(200);\n    });\n    //use to post the file in body and the patient info in the header and forward it to mirth\n    app.post('/postcr', function(req, res) {\n        // console.log(req.files);\n        // Forward to mirth\n        console.log(req.headers.exam_infos);\n\n        request.post({\n            url: 'http://146.148.3.248:80/crtxt/',\n            body: req.headers.exam_infos,\n            headers: {\n                'Content-Type': 'text/plain'\n            }\n        }, function (error, response, body) {\n    //HERE code to manage post errors\n    });\n        res.send(200);\n    });\n    \n    app.get('/hello', function(req, res) {\n        //set the download name\n        res.setHeader('Content-disposition', 'attachment; filename=dramaticpenguin.txt');\n        // Send the datas ad a file\n        \n    });\n    \n    //use to receive the HL7 prescription and forward it to mirth\n    app.post('/postprescriptionhl7', function(req, res) {\n        //forward to mirth\n        request.post({\n            url: 'http://146.148.3.248:81/prescription/',\n            body: req.text,\n            headers: {\n                'Content-Type': 'text/plain; charset=UTF-8'\n            }\n        });\n        res.send(200);\n        \n    });\n    //used to receive the TXT prescription from mirth\n    app.post('/postprescriptiontxt', function(req, res) {\n        console.log(req.text);\n        res.send(200);\n    });\n});\n\n\n// create PDF a document\nvar doc = new PDFDocument();\n//\ndoc.fontSize(14)\n.text('Interface')\n.fontSize(10)\n.text('195 rue Adolphe Defrenne')\n.text('59160 LOMME')\n.text('08 26 30 07 00')\n.text('————————————————')\n.fontSize(14)\n.text('Dr George DELEPORTE')\n.fontSize(10)\n.text('N° RPPS : 10003796462')\n.fontSize(18)\n.text('M. Paul VALLET', { align: 'right'})\n.fontSize(12)\n.text('Né(e) le 05/05/1929', {align: 'right'})\n.text('Etage 2 - Chambre 211', { align: 'right'})\n.text('Séjour n° 56941', { align: 'right'})\n.fontSize(10)\n.moveDown()\n.text('11 RUE D ARTOIR', { align: 'right'})\n.text('59320 EMMERIN', { align: 'right'})\n.text('03 20 07 97 49', { align: 'right'})\n.moveDown(2)\n.fontSize(12)\n.text('Le 13/06/2014,')\n.moveDown()\n.fontSize(22)\n.text('ECHOGRAPHIE des voies urinaires', { align: 'center'})\n.fontSize(12)\n.moveDown()\n.text('INCIDENCES PARTICULIERES :')\n.text('-')\n.text('-')\n.text('-')\n.moveDown()\n.text('INDICATION : retention urinaire désondée.Bilan à la demande du Dr BALLEREAU')\n.text('-')\n.text('-')\n.text('-')\n.moveDown()\n.text('ANTECEDENTS UTILES : CPIschemique sévére avec FEVG abaissée.')\n.text('-')\n.text('-')\n.text('-')\n.moveDown()\n.text('CIRCONSTANCES PARTICULIERES : ')\n.text('-')\n.text('-')\n.text('-')\n.moveDown(2)\n.fontSize(8)\n.text('Informations issues du logiciel Osiris', { align: 'center'});\n//\ndoc.end();\n","undoManager":{"mark":98,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":40},"end":{"row":7,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":7,"column":0},"end":{"row":7,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":4},"end":{"row":7,"column":34}},"text":"PDFDocument = require 'pdfkit'"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":6,"column":39},"end":{"row":6,"column":40}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":6,"column":39},"end":{"row":6,"column":40}},"text":","}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":34},"end":{"row":7,"column":35}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":89,"column":3},"end":{"row":90,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":90,"column":0},"end":{"row":91,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":91,"column":0},"end":{"row":92,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":92,"column":0},"end":{"row":93,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":0},"end":{"row":93,"column":39}},"text":"// create a document and pipe to a blob"},{"action":"insertText","range":{"start":{"row":93,"column":39},"end":{"row":94,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":94,"column":0},"end":{"row":115,"column":0}},"lines":["var doc = new PDFDocument();","var stream = doc.pipe(blobStream());","","// draw some text","doc.fontSize(25)","   .text('Dr George DELEPORTE')","   .fontSize(20)","   .text('10003796462')","    .fontSize(14)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    .moveDown()",".text('08 26 30 07 00')",".moveDown(2)",".fontSize(25)",".text('M. Paul VALLET - 05/05/1929', { align: 'right'});","doc.end();","stream.on('finish', function() {","  iframe.src = stream.toBlobURL('application/pdf');"]},{"action":"insertText","range":{"start":{"row":115,"column":0},"end":{"row":115,"column":3}},"text":"});"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":115,"column":0},"end":{"row":115,"column":3}},"text":"});"},{"action":"removeLines","range":{"start":{"row":113,"column":0},"end":{"row":115,"column":0}},"nl":"\n","lines":["stream.on('finish', function() {","  iframe.src = stream.toBlobURL('application/pdf');"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":95,"column":0},"end":{"row":95,"column":36}},"text":"var stream = doc.pipe(blobStream());"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":94,"column":28},"end":{"row":95,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":94,"column":28},"end":{"row":95,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":10},"end":{"row":93,"column":11}},"text":"P"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":11},"end":{"row":93,"column":12}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":12},"end":{"row":93,"column":13}},"text":"F"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":13},"end":{"row":93,"column":14}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":93,"column":25},"end":{"row":93,"column":43}},"text":"and pipe to a blob"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":93,"column":24},"end":{"row":93,"column":25}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":88,"column":4},"end":{"row":88,"column":22}},"text":"and pipe to a blob"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":88,"column":3},"end":{"row":88,"column":4}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":88,"column":3},"end":{"row":89,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":88,"column":3},"end":{"row":89,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":107,"column":0},"end":{"row":107,"column":56}},"text":".text('M. Paul VALLET - 05/05/1929', { align: 'right'});"},{"action":"removeLines","range":{"start":{"row":94,"column":0},"end":{"row":107,"column":0}},"nl":"\n","lines":["doc.fontSize(25)","   .text('Dr George DELEPORTE')","   .fontSize(20)","   .text('10003796462')","    .fontSize(14)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    .moveDown()",".text('08 26 30 07 00')",".moveDown(2)",".fontSize(25)"]},{"action":"insertText","range":{"start":{"row":94,"column":0},"end":{"row":94,"column":16}},"text":"doc.fontSize(25)"},{"action":"insertText","range":{"start":{"row":94,"column":16},"end":{"row":95,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":95,"column":0},"end":{"row":115,"column":0}},"lines":["   .text('Dr George DELEPORTE')","   .fontSize(20)","   .text('10003796462')","    .fontSize(14)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    .moveDown()",".text('08 26 30 07 00')",".moveDown(2)",".fontSize(25)",".text('M. Paul VALLET', { align: 'right'})",".fontSize(20)",".text('05/05/1929', { align: 'right'})",".fontSize(14)","    .moveDown()","    .text('11 RUE D ARTOIR', { align: 'right'})","    .text('59320 EMMERIN', { align: 'right'})","    .moveDown()"]},{"action":"insertText","range":{"start":{"row":115,"column":0},"end":{"row":115,"column":42}},"text":".text('03 20 07 97 49', { align: 'right'})"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":93,"column":0},"end":{"row":93,"column":17}},"text":"// draw some text"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":92,"column":28},"end":{"row":93,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":33}},"text":"var express = require(\"express\"),"},{"action":"insertText","range":{"start":{"row":0,"column":33},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":109,"column":0}},"lines":["    app = express(),","    mongoose = require('mongoose'),","    db = mongoose.connection,","    request = require(\"request\"),","    multer = require('multer'),","    bodyParser = require('body-parser'),","    PDFDocument = require 'pdfkit';","//Use for upload file","app.use(multer({","    dest: './uploads/'","}));","//use for parsing body data","app.use(bodyParser.urlencoded({","    extended: true","}));","//add support for text/plain","app.use(function(req, res, next) {","    if (req.is('text/*')) {","        req.text = '';","        req.setEncoding('utf8');","        req.on('data', function(chunk) {","            req.text += chunk;","        });","        req.on('end', next);","    }","    else {","        next();","    }","});","process.env.MONGOCON = \"mongodb://cloud9:ZSTqSa04E7Lp3ao@kahana.mongohq.com:10005/app26722556\";","app.listen(process.env.PORT, process.env.IP);","","","","//Start Mongoose","mongoose.connect(process.env.MONGOCON);","//DB open function","db.on('error', console.error.bind(console, 'mongodb connection error:'));","db.once('open', function callback() {","    //use to get the hl7 from mirth","    app.post('/posthl7', function(req, res) {","        console.log(req.text);","        res.send(200);","    });","    //use to post the file in body and the patient info in the header and forward it to mirth","    app.post('/postcr', function(req, res) {","        // console.log(req.files);","        // Forward to mirth","        console.log(req.headers.exam_infos);","","","            url: 'http://146.148.3.248:80/crtxt/',","            body: req.headers.exam_infos,","            headers: {","                'Content-Type': 'text/plain'","            }","        }, function (error, response, body) {","    //HERE code to manage post errors","    })HERE rs","        res.send(200);","    });","    ","    app.get('/hello', function(req, res) {","        //set the download name","        res.setHeader('Content-disposition', 'attachment; filename=dramaticpenguin.txt');","        // Send the datas ad a file","        ","    });","    ","    //use to receive the HL7 prescription and forward it to mirth","    app.post('/postprescriptionhl7', function(req, res) {","        //forward to mirth","        request.post({","            url: 'http://146.148.3.248:81/prescription/',","            body: req.text,","            headers: {","                'Content-Type': 'text/plain; charset=UTF-8'","            }","        });","        res.send(200);","        ","    });","    //used to receive the TXT prescription from mirth","    app.post('/postprescriptiontxt', function(req, res) {","        console.log(req.text);","        res.send(200);","    });","});","","","// create PDF a document","var doc = new PDFDocument();","// draw some text","doc.fontSize(25)","   .text('Dr George DELEPORTE')","   .fontSize(20)","   .text('10003796462')","    .fontSize(14)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    .moveDown()",".text('08 26 30 07 00')",".moveDown(2)",".fontSize(25)",".text('M. Paul VALLET - 05/05/1929', { align: 'right'});","doc.end();"]},{"action":"removeLines","range":{"start":{"row":109,"column":0},"end":{"row":225,"column":0}},"nl":"\n","lines":["var express = require(\"express\"),","    app = express(),","    mongoose = require('mongoose'),","    db = mongoose.connection,","    request = require(\"request\"),","    multer = require('multer'),","    bodyParser = require('body-parser'),","    PDFDocument = require 'pdfkit';","//Use for upload file","app.use(multer({","    dest: './uploads/'","}));","//use for parsing body data","app.use(bodyParser.urlencoded({","    extended: true","}));","//add support for text/plain","app.use(function(req, res, next) {","    if (req.is('text/*')) {","        req.text = '';","        req.setEncoding('utf8');","        req.on('data', function(chunk) {","            req.text += chunk;","        });","        req.on('end', next);","    }","    else {","        next();","    }","});","process.env.MONGOCON = \"mongodb://cloud9:ZSTqSa04E7Lp3ao@kahana.mongohq.com:10005/app26722556\";","app.listen(process.env.PORT, process.env.IP);","","","","//Start Mongoose","mongoose.connect(process.env.MONGOCON);","//DB open function","db.on('error', console.error.bind(console, 'mongodb connection error:'));","db.once('open', function callback() {","    //use to get the hl7 from mirth","    app.post('/posthl7', function(req, res) {","        console.log(req.text);","        res.send(200);","    });","    //use to post the file in body and the patient info in the header and forward it to mirth","    app.post('/postcr', function(req, res) {","        // console.log(req.files);","        // Forward to mirth","        console.log(req.headers.exam_infos);","","","            url: 'http://146.148.3.248:80/crtxt/',","            body: req.headers.exam_infos,","            headers: {","                'Content-Type': 'text/plain'","            }","        }, function (error, response, body) {","    //HERE code to manage post errors","    })HERE rs","        res.send(200);","    });","    ","    app.get('/hello', function(req, res) {","        //set the download name","        res.setHeader('Content-disposition', 'attachment; filename=dramaticpenguin.txt');","        // Send the datas ad a file","        ","    });","    ","    //use to receive the HL7 prescription and forward it to mirth","    app.post('/postprescriptionhl7', function(req, res) {","        //forward to mirth","        request.post({","            url: 'http://146.148.3.248:81/prescription/',","            body: req.text,","            headers: {","                'Content-Type': 'text/plain; charset=UTF-8'","            }","        });","        res.send(200);","        ","    });","    //used to receive the TXT prescription from mirth","    app.post('/postprescriptiontxt', function(req, res) {","        console.log(req.text);","        res.send(200);","    });","});","","","// create PDF a document","var doc = new PDFDocument();","doc.fontSize(25)","   .text('Dr George DELEPORTE')","   .fontSize(20)","   .text('10003796462')","    .fontSize(14)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    .moveDown()",".text('08 26 30 07 00')",".moveDown(2)",".fontSize(25)",".text('M. Paul VALLET', { align: 'right'})",".fontSize(20)",".text('05/05/1929', { align: 'right'})",".fontSize(14)","    .moveDown()","    .text('11 RUE D ARTOIR', { align: 'right'})","    .text('59320 EMMERIN', { align: 'right'})","    .moveDown()",".text('03 20 07 97 49', { align: 'right'})","doc.end();"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":107,"column":0},"end":{"row":107,"column":56}},"text":".text('M. Paul VALLET - 05/05/1929', { align: 'right'});"},{"action":"removeLines","range":{"start":{"row":94,"column":0},"end":{"row":107,"column":0}},"nl":"\n","lines":["doc.fontSize(25)","   .text('Dr George DELEPORTE')","   .fontSize(20)","   .text('10003796462')","    .fontSize(14)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    .moveDown()",".text('08 26 30 07 00')",".moveDown(2)",".fontSize(25)"]},{"action":"insertText","range":{"start":{"row":94,"column":0},"end":{"row":94,"column":16}},"text":"doc.fontSize(22)"},{"action":"insertText","range":{"start":{"row":94,"column":16},"end":{"row":95,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":95,"column":0},"end":{"row":141,"column":0}},"lines":["   .text('Dr George DELEPORTE')","   .fontSize(18)","   .text('10003796462')","    .fontSize(14)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    .moveDown()",".text('08 26 30 07 00')",".fontSize(22)",".text('M. Paul VALLET', { align: 'right'})",".fontSize(18)",".text('Né(e) le 05/05/1929', { align: 'right'})",".fontSize(14)",".moveDown()",".text('11 RUE D ARTOIR', { align: 'right'})",".text('59320 EMMERIN', { align: 'right'})",".moveDown()",".text('03 20 07 97 49', { align: 'right'})",".moveDown()",".fontSize(22)",".text('ECHOGRAPHIE des voies urinaires', { align: 'center'})",".fontSize(12)",".moveDown()",".text('INCIDENCES PARTICULIERES :')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('INDICATION : retention urinaire désondée.Bilan à la demande du Dr BALLEREAU')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('ANTECEDENTS UTILES : CPIschemique sévére avec FEVG abaissée.')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('CIRCONSTANCES PARTICULIERES : ')",".text('-')",".text('-')",".text('-')",".moveDown(3)",".text('Informations issues du logiciel Osiris', { align: 'center'})"]},{"action":"insertText","range":{"start":{"row":141,"column":0},"end":{"row":141,"column":58}},"text":"// end and display the document in the iframe to the right"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":141,"column":0},"end":{"row":141,"column":58}},"text":"// end and display the document in the iframe to the right"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":93,"column":0},"end":{"row":93,"column":17}},"text":"// draw some text"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":93,"column":0},"end":{"row":94,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":139,"column":20},"end":{"row":139,"column":26}},"text":"issues"},{"action":"insertText","range":{"start":{"row":139,"column":20},"end":{"row":139,"column":21}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":21},"end":{"row":139,"column":22}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":22},"end":{"row":139,"column":23}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":23},"end":{"row":139,"column":24}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":24},"end":{"row":139,"column":25}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":25},"end":{"row":139,"column":26}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":26},"end":{"row":139,"column":27}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":27},"end":{"row":139,"column":28}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":28},"end":{"row":139,"column":29}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":139,"column":30},"end":{"row":139,"column":32}},"text":"du"},{"action":"insertText","range":{"start":{"row":139,"column":30},"end":{"row":139,"column":31}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":31},"end":{"row":139,"column":32}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":32},"end":{"row":139,"column":33}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":33},"end":{"row":139,"column":34}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":34},"end":{"row":139,"column":35}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":35},"end":{"row":139,"column":36}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":139,"column":74},"end":{"row":139,"column":75}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":113,"column":42},"end":{"row":114,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":0},"end":{"row":114,"column":42}},"text":".text('03 20 07 97 49', { align: 'right'})"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":114,"column":7},"end":{"row":114,"column":21}},"text":"03 20 07 97 49"},{"action":"insertText","range":{"start":{"row":114,"column":7},"end":{"row":114,"column":8}},"text":"C"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":8},"end":{"row":114,"column":9}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":9},"end":{"row":114,"column":10}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":10},"end":{"row":114,"column":11}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":11},"end":{"row":114,"column":12}},"text":"b"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":12},"end":{"row":114,"column":13}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":13},"end":{"row":114,"column":14}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":14},"end":{"row":114,"column":15}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":15},"end":{"row":114,"column":16}},"text":"2"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":16},"end":{"row":114,"column":17}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":114,"column":17},"end":{"row":114,"column":18}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":97,"column":15},"end":{"row":97,"column":16}},"text":"4"},{"action":"insertText","range":{"start":{"row":97,"column":15},"end":{"row":97,"column":16}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":97,"column":15},"end":{"row":97,"column":16}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":97,"column":15},"end":{"row":97,"column":16}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":108,"column":11},"end":{"row":108,"column":12}},"text":"4"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":108,"column":11},"end":{"row":108,"column":12}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":140,"column":0},"end":{"row":140,"column":75}},"text":".text('Informations fournises par le logiciel Osiris', { align: 'center'});"},{"action":"removeLines","range":{"start":{"row":93,"column":0},"end":{"row":140,"column":0}},"nl":"\n","lines":["doc.fontSize(22)","   .text('Dr George DELEPORTE')","   .fontSize(18)","   .text('10003796462')","    .fontSize(10)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    .moveDown()",".text('08 26 30 07 00')",".fontSize(22)",".text('M. Paul VALLET', { align: 'right'})",".fontSize(18)",".text('Né(e) le 05/05/1929', { align: 'right'})",".fontSize(10)",".moveDown()",".text('11 RUE D ARTOIR', { align: 'right'})",".text('59320 EMMERIN', { align: 'right'})",".moveDown()",".text('03 20 07 97 49', { align: 'right'})",".text('Chambre 211', { align: 'right'})",".moveDown()",".fontSize(22)",".text('ECHOGRAPHIE des voies urinaires', { align: 'center'})",".fontSize(12)",".moveDown()",".text('INCIDENCES PARTICULIERES :')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('INDICATION : retention urinaire désondée.Bilan à la demande du Dr BALLEREAU')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('ANTECEDENTS UTILES : CPIschemique sévére avec FEVG abaissée.')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('CIRCONSTANCES PARTICULIERES : ')",".text('-')",".text('-')",".text('-')",".moveDown(3)"]},{"action":"insertText","range":{"start":{"row":93,"column":0},"end":{"row":93,"column":16}},"text":"doc.fontSize(22)"},{"action":"insertText","range":{"start":{"row":93,"column":16},"end":{"row":94,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":94,"column":0},"end":{"row":141,"column":0}},"lines":["   .text('Dr George DELEPORTE')","   .fontSize(18)","   .text('10003796462')","    .fontSize(10)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    ",".text('08 26 30 07 00')",".fontSize(22)",".text('M. Paul VALLET', { align: 'right'})",".fontSize(18)",".text('Né(e) le 05/05/1929', { align: 'right'})",".text('Chambre 211', { align: 'right'})",".fontSize(10)",".moveDown()",".text('11 RUE D ARTOIR', { align: 'right'})",".text('59320 EMMERIN', { align: 'right'})","",".text('03 20 07 97 49', { align: 'right'})",".moveDown()",".fontSize(22)",".text('ECHOGRAPHIE des voies urinaires', { align: 'center'})",".fontSize(12)",".moveDown()",".text('INCIDENCES PARTICULIERES :')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('INDICATION : retention urinaire désondée.Bilan à la demande du Dr BALLEREAU')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('ANTECEDENTS UTILES : CPIschemique sévére avec FEVG abaissée.')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('CIRCONSTANCES PARTICULIERES : ')",".text('-')",".text('-')",".text('-')",".moveDown(6)",".fontSize(8)"]},{"action":"insertText","range":{"start":{"row":141,"column":0},"end":{"row":141,"column":75}},"text":".text('Informations fournises par le logiciel Osiris', { align: 'center'});"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":92,"column":28},"end":{"row":93,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":0},"end":{"row":93,"column":1}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":93,"column":1},"end":{"row":93,"column":2}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":143,"column":0},"end":{"row":143,"column":1}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":143,"column":1},"end":{"row":143,"column":2}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":142,"column":20},"end":{"row":142,"column":36}},"text":"fournises par le"},{"action":"insertText","range":{"start":{"row":142,"column":20},"end":{"row":142,"column":21}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":142,"column":21},"end":{"row":142,"column":22}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":142,"column":22},"end":{"row":142,"column":23}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":142,"column":23},"end":{"row":142,"column":24}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":142,"column":24},"end":{"row":142,"column":25}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":142,"column":25},"end":{"row":142,"column":26}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":142,"column":26},"end":{"row":142,"column":27}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":142,"column":27},"end":{"row":142,"column":28}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":142,"column":28},"end":{"row":142,"column":29}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":142,"column":0},"end":{"row":142,"column":68}},"text":".text('Informations issues du logiciel Osiris', { align: 'center'});"},{"action":"removeLines","range":{"start":{"row":94,"column":0},"end":{"row":142,"column":0}},"nl":"\n","lines":["doc.fontSize(22)","   .text('Dr George DELEPORTE')","   .fontSize(18)","   .text('10003796462')","    .fontSize(10)","    .moveDown()","    .text('Interface')","    .text('195 rue Adolphe Defrenne')","    .text('59160 LOMME')","    ",".text('08 26 30 07 00')",".fontSize(22)",".text('M. Paul VALLET', { align: 'right'})",".fontSize(18)",".text('Né(e) le 05/05/1929', { align: 'right'})",".text('Chambre 211', { align: 'right'})",".fontSize(10)",".moveDown()",".text('11 RUE D ARTOIR', { align: 'right'})",".text('59320 EMMERIN', { align: 'right'})","",".text('03 20 07 97 49', { align: 'right'})",".moveDown()",".fontSize(22)",".text('ECHOGRAPHIE des voies urinaires', { align: 'center'})",".fontSize(12)",".moveDown()",".text('INCIDENCES PARTICULIERES :')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('INDICATION : retention urinaire désondée.Bilan à la demande du Dr BALLEREAU')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('ANTECEDENTS UTILES : CPIschemique sévére avec FEVG abaissée.')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('CIRCONSTANCES PARTICULIERES : ')",".text('-')",".text('-')",".text('-')",".moveDown(6)",".fontSize(8)"]},{"action":"insertText","range":{"start":{"row":94,"column":0},"end":{"row":94,"column":16}},"text":"doc.fontSize(14)"},{"action":"insertText","range":{"start":{"row":94,"column":16},"end":{"row":95,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":95,"column":0},"end":{"row":145,"column":0}},"lines":[".text('Interface')",".fontSize(10)",".text('195 rue Adolphe Defrenne')",".text('59160 LOMME')",".text('08 26 30 07 00')",".text('————————————————')",".fontSize(14)",".text('Dr George DELEPORTE')",".fontSize(10)",".text('N° RPPS : 10003796462')",".fontSize(20)",".text('M. Paul VALLET', { align: 'right'})",".fontSize(14)",".text('Né(e) le 05/05/1929', {align: 'right'})",".text('Etage 2 - Chambre 211', { align: 'right'})",".text('Séjour n° 56941', { align: 'right'})",".fontSize(10)",".moveDown()",".text('11 RUE D ARTOIR', { align: 'right'})",".text('59320 EMMERIN', { align: 'right'})",".text('03 20 07 97 49', { align: 'right'})",".moveDown(2)",".fontSize(12)",".text('Le 13/06/2014,')",".moveDown()",".fontSize(22)",".text('ECHOGRAPHIE des voies urinaires', { align: 'center'})",".fontSize(12)",".moveDown()",".text('INCIDENCES PARTICULIERES :')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('INDICATION : retention urinaire désondée.Bilan à la demande du Dr BALLEREAU')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('ANTECEDENTS UTILES : CPIschemique sévére avec FEVG abaissée.')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('CIRCONSTANCES PARTICULIERES : ')",".text('-')",".text('-')",".text('-')",".moveDown(2)",".fontSize(8)"]},{"action":"insertText","range":{"start":{"row":145,"column":0},"end":{"row":145,"column":68}},"text":".text('Informations issues du logiciel Osiris', { align: 'center'});"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":145,"column":0},"end":{"row":145,"column":68}},"text":".text('Informations issues du logiciel Osiris', { align: 'center'});"},{"action":"removeLines","range":{"start":{"row":94,"column":0},"end":{"row":145,"column":0}},"nl":"\n","lines":["doc.fontSize(14)",".text('Interface')",".fontSize(10)",".text('195 rue Adolphe Defrenne')",".text('59160 LOMME')",".text('08 26 30 07 00')",".text('————————————————')",".fontSize(14)",".text('Dr George DELEPORTE')",".fontSize(10)",".text('N° RPPS : 10003796462')",".fontSize(20)",".text('M. Paul VALLET', { align: 'right'})",".fontSize(14)",".text('Né(e) le 05/05/1929', {align: 'right'})",".text('Etage 2 - Chambre 211', { align: 'right'})",".text('Séjour n° 56941', { align: 'right'})",".fontSize(10)",".moveDown()",".text('11 RUE D ARTOIR', { align: 'right'})",".text('59320 EMMERIN', { align: 'right'})",".text('03 20 07 97 49', { align: 'right'})",".moveDown(2)",".fontSize(12)",".text('Le 13/06/2014,')",".moveDown()",".fontSize(22)",".text('ECHOGRAPHIE des voies urinaires', { align: 'center'})",".fontSize(12)",".moveDown()",".text('INCIDENCES PARTICULIERES :')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('INDICATION : retention urinaire désondée.Bilan à la demande du Dr BALLEREAU')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('ANTECEDENTS UTILES : CPIschemique sévére avec FEVG abaissée.')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('CIRCONSTANCES PARTICULIERES : ')",".text('-')",".text('-')",".text('-')",".moveDown(2)",".fontSize(8)"]},{"action":"insertText","range":{"start":{"row":94,"column":0},"end":{"row":94,"column":16}},"text":"doc.fontSize(14)"},{"action":"insertText","range":{"start":{"row":94,"column":16},"end":{"row":95,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":95,"column":0},"end":{"row":145,"column":0}},"lines":[".text('Interface')",".fontSize(10)",".text('195 rue Adolphe Defrenne')",".text('59160 LOMME')",".text('08 26 30 07 00')",".text('————————————————')",".fontSize(14)",".text('Dr George DELEPORTE')",".fontSize(10)",".text('N° RPPS : 10003796462')",".fontSize(18)",".text('M. Paul VALLET', { align: 'right'})",".fontSize(12)",".text('Né(e) le 05/05/1929', {align: 'right'})",".text('Etage 2 - Chambre 211', { align: 'right'})",".text('Séjour n° 56941', { align: 'right'})",".fontSize(10)",".moveDown()",".text('11 RUE D ARTOIR', { align: 'right'})",".text('59320 EMMERIN', { align: 'right'})",".text('03 20 07 97 49', { align: 'right'})",".moveDown(2)",".fontSize(12)",".text('Le 13/06/2014,')",".moveDown()",".fontSize(22)",".text('ECHOGRAPHIE des voies urinaires', { align: 'center'})",".fontSize(12)",".moveDown()",".text('INCIDENCES PARTICULIERES :')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('INDICATION : retention urinaire désondée.Bilan à la demande du Dr BALLEREAU')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('ANTECEDENTS UTILES : CPIschemique sévére avec FEVG abaissée.')",".text('-')",".text('-')",".text('-')",".moveDown()",".text('CIRCONSTANCES PARTICULIERES : ')",".text('-')",".text('-')",".text('-')",".moveDown(2)",".fontSize(8)"]},{"action":"insertText","range":{"start":{"row":145,"column":0},"end":{"row":145,"column":68}},"text":".text('Informations issues du logiciel Osiris', { align: 'center'});"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":59,"column":6},"end":{"row":59,"column":10}},"text":"HERE"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":61,"column":1},"end":{"row":61,"column":2}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":61,"column":0},"end":{"row":61,"column":1}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":58,"column":0},"end":{"row":58,"column":37}},"text":"    //HERE code to manage post errors"},{"action":"removeLines","range":{"start":{"row":50,"column":0},"end":{"row":58,"column":0}},"nl":"\n","lines":["","","            url: 'http://146.148.3.248:80/crtxt/',","            body: req.headers.exam_infos,","            headers: {","                'Content-Type': 'text/plain'","            }","        }, function (error, response, body) {"]},{"action":"insertText","range":{"start":{"row":50,"column":0},"end":{"row":51,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":51,"column":0},"end":{"row":58,"column":0}},"lines":["        request.post({","            url: 'http://146.148.3.248:80/crtxt/',","            body: req.headers.exam_infos,","            headers: {","                'Content-Type': 'text/plain'","            }","        }, function (error, response, body) {"]},{"action":"insertText","range":{"start":{"row":58,"column":0},"end":{"row":58,"column":37}},"text":"    //HERE code to manage post errors"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":59,"column":7},"end":{"row":59,"column":8}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":59,"column":6},"end":{"row":59,"column":7}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":34},"end":{"row":7,"column":35}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":34},"end":{"row":7,"column":35}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":34},"end":{"row":7,"column":35}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":34},"end":{"row":8,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":8,"column":0},"end":{"row":8,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":8,"column":4},"end":{"row":9,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":9,"column":0},"end":{"row":9,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":34},"end":{"row":7,"column":35}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":34},"end":{"row":7,"column":35}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":25},"end":{"row":7,"column":27}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":26},"end":{"row":7,"column":27}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":26},"end":{"row":7,"column":27}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":8,"column":0},"end":{"row":8,"column":1}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":8,"column":0},"end":{"row":8,"column":3}},"text":"   "},{"action":"removeText","range":{"start":{"row":7,"column":36},"end":{"row":8,"column":0}},"text":"\n"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":36},"end":{"row":7,"column":36},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1406559601230}